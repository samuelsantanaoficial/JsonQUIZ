<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#007bff">
    <meta name="description" content="Um quiz interativo e divertido.">
    <title>jsonQuiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
    <link rel="shortcut icon" href="favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
    <link rel="manifest" href="favicon/site.webmanifest" />

    <!-- Registro do Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker registrado com sucesso:', registration);
                    })
                    .catch(error => {
                        console.log('Falha ao registrar Service Worker:', error);
                    });
            });
        }
    </script>


</head>

<body class="container mt-4">
    <!-- Seletor de Modo -->
    <div id="modeSelector" class="card">
        <div class="card-body text-center py-5">
            <div class="d-flex align-items-center justify-content-center mb-4">
                <img src="logo.svg" alt="Logo do Quiz" style="height: 40px;" class="me-3">
                <h1>jsonQUIZ</h1>
                <p class="m-3">v1.1.0</p>
            </div>

            <div class="row g-3">
                <div class="col-md-6">
                    <button id="singlePlayerBtn" class="btn btn-primary w-100 py-4">
                        <div>
                            <h3>üßë Modo Individual</h3>
                            <p class="mb-0">Jogue sozinho contra o tempo</p>
                        </div>
                    </button>
                </div>
                <div class="col-md-6">
                    <button id="multiPlayerBtn" class="btn btn-success w-100 py-4">
                        <div>
                            <h3>üë• Multiplayer Local</h3>
                            <p class="mb-0">2-6 jogadores no mesmo dispositivo</p>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modo Individual (seu c√≥digo original) -->
    <!-- Modo Individual (ATUALIZADO) -->
<div id="singlePlayerMode" class="d-none">
    <div class="card">
        <div class="card-body">
            <button class="btn btn-outline-secondary mb-3" onclick="backToModeSelector()">
                ‚Üê Voltar
            </button>

            <div class="d-flex align-items-center mb-4">
                <img src="logo.svg" alt="Logo do Quiz" style="height: 40px;" class="me-3">
                <h1>jsonQUIZ</h1>
                <p class="m-3">Individual</p>
            </div>

            <!-- Carregar Perguntas -->
            <div id="uploadArea">
                <input type="file" id="questionsFile" class="form-control mb-3" accept=".json">
                <button class="btn btn-primary w-100" onclick="startSingleGame()" id="playButton"
                    disabled>Jogar</button>
            </div>

            <!-- √Årea do Jogo -->
            <div id="gameArea" class="d-none">
                <!-- PONTUA√á√ÉO -->
                <div id="scoreDisplay" class="alert alert-info text-center mb-3">üèÖ Pontua√ß√£o: 0</div>

                <!-- TIMER -->
                <div id="timerDisplay" class="text-center display-6 fw-bold text-primary mb-3">30</div>

                <!-- PERGUNTA -->
                <h2 id="question" class="mb-3"></h2>

                <!-- ALTERNATIVAS -->
                <div id="alternatives" class="list-group mb-3"></div>

                <!-- FEEDBACK -->
                <div id="feedback" class="alert mb-3 d-none"></div>

                <!-- REFER√äNCIA -->
                <div id="reference" class="alert alert-info mb-3 d-none"></div>

                <!-- PR√ìXIMA -->
                <button class="btn btn-success w-100" onclick="nextQuestion()" id="nextButton" disabled>Pr√≥xima</button>
            </div>
        </div>
    </div>
</div>


    <!-- Modo Multiplayer -->
    <div id="multiPlayerMode" class="d-none">
        <!-- Setup do Multiplayer -->
        <div id="multiSetup" class="card">
            <div class="card-body">
                <button class="btn btn-outline-secondary mb-3" onclick="backToModeSelector()">
                    ‚Üê Voltar
                </button>

                <div class="d-flex align-items-center mb-4">
                    <img src="logo.svg" alt="Logo do Quiz" style="height: 40px;" class="me-3">
                    <h1>Multiplayer Local</h1>
                </div>

                <!-- Carregar Perguntas -->
                <div class="mb-4">
                    <label for="multiQuestionsFile" class="form-label">Importar Perguntas (JSON)</label>
                    <input type="file" id="multiQuestionsFile" class="form-control" accept=".json">
                </div>

                <!-- Configura√ß√£o dos Jogadores -->
                <div id="playersSetup">
                    <h4 class="mb-3">Configurar Jogadores</h4>
                    <div id="playersContainer"></div>

                    <div class="row g-2 mb-3">
                        <div class="col">
                            <button id="addPlayerBtn" class="btn btn-outline-primary w-100">
                                ‚ûï Adicionar Jogador
                            </button>
                        </div>
                        <div class="col">
                            <button id="removePlayerBtn" class="btn btn-outline-danger w-100">
                                ‚ûñ Remover Jogador
                            </button>
                        </div>
                    </div>
                </div>

                <button id="startMultiBtn" class="btn btn-success w-100 btn-lg" disabled>
                    üöÄ Iniciar Jogo Multiplayer
                </button>
            </div>
        </div>

        <!-- Jogo Multiplayer -->
        <div id="multiGame" class="card d-none">
            <div class="card-body">
                <button class="btn btn-outline-secondary mb-3" onclick="backToMultiSetup()">
                    ‚Üê Configura√ß√µes
                </button>

                <!-- Placar -->
                <div id="scoreboard" class="mb-3"></div>

                <!-- Barra de Progresso -->
                <div class="progress mb-3">
                    <div class="progress-bar" id="progressFill" role="progressbar" style="width: 0%"></div>
                </div>

                <!-- Jogador Atual -->
                <div id="currentPlayerDisplay" class="alert text-center fw-bold mb-3"></div>

                <!-- Timer -->
                <div id="multiTimerDisplay" class="text-center display-4 fw-bold text-primary mb-3">15</div>

                <!-- Pergunta -->
                <h3 id="multiQuestion" class="mb-3"></h3>
                <div id="multiAlternatives" class="list-group mb-3"></div>

                <!-- Bot√£o "Pr√≥xima" -->
                <button id="nextMultiButton" class="btn btn-success w-100 d-none mt-3">Pr√≥xima</button>

            </div>
        </div>

        <!-- Resultados -->
        <div id="multiResults" class="card d-none">
            <div class="card-body text-center">
                <h2 class="mb-4">üèÜ Resultado Final</h2>
                <div id="finalScoreboard" class="mb-4"></div>
                <div id="winnerAnnouncement" class="alert alert-success mb-4"></div>

                <div class="row g-2">
                    <div class="col">
                        <button id="playAgainBtn" class="btn btn-success w-100">
                            üîÑ Jogar Novamente
                        </button>
                    </div>
                    <div class="col">
                        <button id="newMultiGameBtn" class="btn btn-primary w-100">
                            üë• Nova Configura√ß√£o
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="container text-center bg-dark text-light py-5 mt-5">
        <p class="mb-2">Baixe as perguntas 
            <a href="https://github.com/samuelsantanaoficial/jsonquiz/releases/latest" target="_blank" class="text-info">aqui</a>
        </p>
        <ul class="list-inline">
            <li class="list-inline-item">
                <a href="https://github.com/samuelsantanaoficial/jsonquiz" target="_blank" class="text-info">GitHub</a>
            </li>
            <li class="list-inline-item">
                <a href="https://br.freepik.com/" target="_blank" class="text-info">Freepik</a>
            </li>
            <li class="list-inline-item">
                <a href="https://getbootstrap.com/" target="_blank" class="text-info">Bootstrap</a>
            </li>
            <li class="list-inline-item">
                <a href="https://realfavicongenerator.net/" target="_blank" class="text-info">Favicon Generator</a>
            </li>
        </ul>
    </footer>

    <!-- √Åudios -->
    <audio id="audioSuccess" src="audio/success.mp3"></audio>
    <audio id="audioError" src="audio/error.mp3"></audio>
    <audio id="audioTimer" src="audio/timer.mp3" loop></audio>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="script/singleplayer.js"></script>
    <script src="script/multiplayer.js"></script>
    <script src="script/main.js"></script>

</body>

</html>